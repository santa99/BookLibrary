@using View.Services
<div>

    <button @onclick="PrevPage">Prev</button>
    <label>Page:</label>
    @PaginationState.Page
    <button @onclick="NextPage">Next</button>

    <label>Per page:</label>
    <select @onchange="ChangePagination">
        @foreach(var option in _options)
        {
            if (option == _selected)
            {
                <option selected value="@option" >@option</option>
            }
            else
            {
                <option value="@option">@option</option>
            }
        }
    </select>
</div>

@code {

    [Parameter] public PaginationState PaginationState { get; set; }

    [Parameter] public EventCallback<int> OnPaginationChanged { get; set; }

    private int _selected = 10;
    private List<int> _options = new()
    {
        1,2,5,10,30
    };

    protected override async Task OnInitializedAsync()
    {
        PaginationState.SetDisplayCount(_selected);
        await OnPaginationChanged.InvokeAsync();
    }

    private async Task ChangePagination(ChangeEventArgs val)
    {
        if (int.TryParse((string?)val.Value, out var newCount))
        {
            PaginationState.SetDisplayCount(newCount);
            await OnPaginationChanged.InvokeAsync();
        }
    }

    private async Task NextPage(EventArgs arg)
    {
        if (!PaginationState.IsNextAvailable)
        {
            return;
        }
        
        PaginationState.SetPage(PaginationState.Page + 1);
        await OnPaginationChanged.InvokeAsync();
    }

    private async Task PrevPage(EventArgs arg)
    {
        if (!PaginationState.IsPrevAvailable)
        {
            return;
        }
        
        PaginationState.SetPage(PaginationState.Page - 1);
        await OnPaginationChanged.InvokeAsync();
    }

}